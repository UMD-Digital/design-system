<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Component Usage - UMD Design System</title>
    <link rel="stylesheet" href="https://unpkg.com/@universityofmaryland/web-styles-library/dist/css/styles.min.css" />
    <script src="https://unpkg.com/@universityofmaryland/web-components-library/dist/cdn.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
      rel="stylesheet"
    />
    <style>
      pre[class*="language-"] { background-color: #f8f9fa; border-radius: 4px; padding: 1rem; overflow-x: auto; margin: 1rem 0; }
      pre { background-color: #f8f9fa; border-radius: 4px; padding: 1rem; overflow-x: auto; }
      code { color: #e21833; }
      pre code { color: inherit; }
      table { width: 100%; border-collapse: collapse; margin: 1rem 0 2rem; }
      th { background-color: #f8f9fa; padding: 0.75rem; text-align: left; border-bottom: 2px solid #dee2e6; }
      td { padding: 0.75rem; border-bottom: 1px solid #dee2e6; }
      td code, th code { background-color: #f8f9fa; padding: 0.2rem 0.4rem; border-radius: 3px; }
      .code-example { background-color: #fff; border: 1px solid #dee2e6; border-radius: 4px; padding: 1rem; margin: 1rem 0; }
      .use-case-card { border: 1px solid #dee2e6; border-radius: 8px; padding: 1.5rem; margin-bottom: 2.5rem; background-color: #fff; }
      .use-case-card h4 { color: #e21833; margin-bottom: 1rem; }
      .use-case-card ul { padding-left: 1.5rem; }
      .toc {
        position: sticky;
        top: 80px;
        background-color: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .toc-link {
        display: block;
        padding: 0.5rem 0;
        color: #495057;
        text-decoration: none;
        border-left: 3px solid transparent;
        padding-left: 1rem;
      }
      .toc-link:hover,
      .toc-link.active {
        color: #e21833;
        border-left-color: #e21833;
      }
      .type-card {
        background-color: #f8f9fa;
        border-left: 4px solid #e21833;
        padding: 1rem;
        margin-bottom: 1rem;
      }
      .type-card code {
        color: #0066cc;
      }
      .alert-pro-tip {
        background-color: #e3f2fd;
        border: 1px solid #90caf9;
        color: #0d47a1;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1rem;
      }
      .feature-badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        background-color: #28a745;
        color: white;
        border-radius: 4px;
        margin-left: 0.5rem;
      }
      .two-column-layout {
        display: grid;
        grid-template-columns: 240px 1fr;
        gap: 2rem;
      }
      @media (max-width: 767px) {
        .two-column-layout {
          grid-template-columns: 1fr;
        }
        .toc {
          position: static;
        }
      }
      h3 { margin-top: 3rem; margin-bottom: 1rem; }
      h5 { font-weight: 700; margin-top: 1.5rem; margin-bottom: 0.75rem; }
      section > h3:first-child, .use-case-card > h4:first-child { margin-top: 0; }
    </style>
  </head>
  <body>
    <header>
      <div class="umd-layout-space-horizontal-full">
        <umd-element-navigation-header sticky>
          <a slot="logo" href="../index.html">
            <span class="umd-sans-larger-bold">Design System Docs</span>
          </a>
          <div slot="main-navigation">
            <umd-element-nav-item>
              <a slot="primary-link" href="../index.html">Home</a>
            </umd-element-nav-item>
            <umd-element-nav-item>
              <a slot="primary-link" href="../architecture.html">Architecture</a>
            </umd-element-nav-item>
            <umd-element-nav-item>
              <a slot="primary-link" href="../getting-started.html">Getting Started</a>
            </umd-element-nav-item>
            <umd-element-nav-item>
              <a slot="primary-link" href="#">Packages</a>
              <nav slot="dropdown-links">
                <ul>
                  <li><a href="usage.html">Components</a></li>
                  <li><a href="../styles/static-css.html">Styles</a></li>
                  <li><a href="../elements/use-cases.html">Elements</a></li>
                  <li><a href="../feeds/use-cases.html">Feeds</a></li>
                  <li><a href="../tokens/use-cases.html">Tokens</a></li>
                  <li><a href="../icons/use-cases.html">Icons</a></li>
                  <li><a href="../utilities/use-cases.html">Utilities</a></li>
                  <li><a href="../infrastructure/model-and-builder.html">Model &amp; Builder</a></li>
                </ul>
              </nav>
            </umd-element-nav-item>
            <umd-element-nav-item>
              <a slot="primary-link" href="http://playground.designsystem.umd.edu" target="_blank">Playground</a>
            </umd-element-nav-item>
          </div>
          <div slot="primary-slide-links">
            <a href="../index.html"><span>Home</span></a>
            <a href="../architecture.html"><span>Architecture</span></a>
            <a href="../getting-started.html"><span>Getting Started</span></a>
            <a href="#" data-child-ref="slide-packages"><span>Packages</span></a>
            <a href="http://playground.designsystem.umd.edu" target="_blank"><span>Playground</span></a>
          </div>
          <div slot="children-slides">
            <div data-parent-ref="slide-packages">
              <a href="usage.html"><span>Components</span></a>
              <a href="../styles/static-css.html"><span>Styles</span></a>
              <a href="../elements/use-cases.html"><span>Elements</span></a>
              <a href="../feeds/use-cases.html"><span>Feeds</span></a>
              <a href="../tokens/use-cases.html"><span>Tokens</span></a>
              <a href="../icons/use-cases.html"><span>Icons</span></a>
              <a href="../utilities/use-cases.html"><span>Utilities</span></a>
              <a href="../infrastructure/model-and-builder.html"><span>Model &amp; Builder</span></a>
            </div>
          </div>
        </umd-element-navigation-header>
      </div>
    </header>

    <main>
      <div class="umd-layout-space-vertical-interior">
        <umd-element-hero-minimal data-theme="light">
          <h1 slot="headline">Advanced Component Usage</h1>
          <div slot="text"><p>TypeScript, testing, and custom development patterns</p></div>
        </umd-element-hero-minimal>
        <div class="umd-layout-space-horizontal-normal">
          <umd-element-breadcrumb>
            <div slot="paths">
              <a href="../index.html">Home</a>
              <a href="usage.html">Components</a>
              <p>Advanced Usage</p>
            </div>
          </umd-element-breadcrumb>
        </div>
      </div>

      <section class="umd-layout-space-vertical-interior">
        <div class="umd-layout-space-horizontal-normal">

          <section id="getting-started">
            <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
              <h2 slot="headline">Getting Started</h2>
              <div slot="text"><p>
                <strong>Where This Package Fits:</strong> Components sits at the top of the <strong>Application</strong> layer. It depends on all lower packages and provides ready-to-use web components.
                <a href="../architecture.html">See full architecture</a>.
              </p></div>
            </umd-element-section-intro>
          </section>

          <div class="two-column-layout">
            <!-- Table of Contents -->
            <div>
              <nav id="toc" class="toc">
                <h5>On This Page</h5>
                <a class="toc-link" href="#typescript">TypeScript Integration</a>
                <a class="toc-link" href="#events">Event Handling</a>
                <a class="toc-link" href="#reactive">Reactive Components</a>
                <a class="toc-link" href="#testing">Testing Components</a>
                <a class="toc-link" href="#frameworks">Framework Integration</a>
                <a class="toc-link" href="#custom">Custom Components</a>
                <a class="toc-link" href="#performance">Performance</a>
              </nav>
            </div>

            <!-- Main Content -->
            <div>
              <!-- TypeScript Integration -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">TypeScript Integration</h2>
                <div slot="text"><p>The components library provides comprehensive TypeScript support with full type definitions.</p></div>
              </umd-element-section-intro>
              <section id="typescript" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Type Imports</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">import {
  Components,
  ComponentRef,
  SlotConfiguration,
  ComponentEvents,
  CreateComponentFunction,
  TypedComponentRef
} from '@universityofmaryland/web-components-library';

// Component-specific types
import type {
  HeroProps,
  CardProps,
  NavigationConfig
} from '@universityofmaryland/web-components-library/types';</code></pre>
                </div>

                <h3 class="umd-sans-larger">Typed Component References</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">// Get typed component reference
const hero = document.querySelector&lt;HTMLElement &amp; ComponentEvents&gt;('umd-element-hero');

if (hero) {
  // TypeScript knows about component events
  hero.addEventListener('component:ready', (event) =&gt; {
    console.log('Hero component initialized', event.detail);
  });

  // Set attributes with type safety
  hero.setAttribute('data-theme', 'dark'); // Valid
  // hero.setAttribute('data-theme', 'invalid'); // TypeScript error
}</code></pre>
                </div>

                <h3 class="umd-sans-larger">Creating Components Programmatically</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">import { Components } from '@universityofmaryland/web-components-library';

// Initialize components
Components.hero.base();

// Create element programmatically with type safety
const createTypedHero = (): HTMLElement =&gt; {
  const hero = document.createElement('umd-element-hero') as HTMLElement &amp; {
    setTheme: (theme: 'light' | 'dark') =&gt; void;
    updateContent: (content: HeroContent) =&gt; void;
  };

  hero.setAttribute('data-theme', 'dark');
  hero.setAttribute('data-display', 'overlay');

  return hero;
};</code></pre>
                </div>

                <div class="type-card">
                  <strong>Key Types:</strong>
                  <ul>
                    <li>
                      <code>ComponentRef</code> - Base reference returned by
                      component factories
                    </li>
                    <li>
                      <code>SlotConfiguration</code> - Defines allowed slots and
                      their constraints
                    </li>
                    <li>
                      <code>ComponentEvents</code> - Interface for component event
                      handling
                    </li>
                    <li>
                      <code>CreateComponentFunction</code> - Standard signature for
                      component creation
                    </li>
                  </ul>
                </div>
              </section>

              <!-- Event Handling -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Event Handling</h2>
                <div slot="text"><p>Components emit custom events for lifecycle and interaction handling.</p></div>
              </umd-element-section-intro>
              <section id="events" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Component Lifecycle Events</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">const card = document.querySelector('umd-element-card');

// Component initialization
card.addEventListener('component:ready', (event) =&gt; {
  console.log('Component initialized with:', event.detail);
});

// Content changes
card.addEventListener('component:updated', (event) =&gt; {
  console.log('Component updated:', event.detail.changes);
});

// Before removal
card.addEventListener('component:destroy', (event) =&gt; {
  console.log('Component being removed');
});</code></pre>
                </div>
              </section>

              <!-- Reactive Components -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Reactive Components</h2>
                <div slot="text"><p>Components support reactive updates through observed attributes.</p></div>
              </umd-element-section-intro>
              <section id="reactive" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Observed Attributes</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// Visual state changes
const drawer = document.querySelector('umd-element-navigation-drawer');

// Open drawer programmatically
drawer.setAttribute('is-visual-open', 'true');

// Close drawer
drawer.setAttribute('is-visual-open', 'false');

// Listen for state changes
const observer = new MutationObserver((mutations) =&gt; {
  mutations.forEach((mutation) =&gt; {
    if (mutation.attributeName === 'is-visual-open') {
      const isOpen = drawer.getAttribute('is-visual-open') === 'true';
      console.log('Drawer state:', isOpen ? 'open' : 'closed');
    }
  });
});

observer.observe(drawer, { attributes: true });</code></pre>
                </div>

                <h3 class="umd-sans-larger">Responsive Behavior</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// Trigger component resize calculations
const hero = document.querySelector('umd-element-hero');

// Manual resize trigger
hero.setAttribute('resize', 'true');

// Automatic resize handling
const resizeObserver = new ResizeObserver((entries) =&gt; {
  entries.forEach((entry) =&gt; {
    if (entry.target.tagName.startsWith('UMD-ELEMENT-')) {
      entry.target.setAttribute('resize', 'true');
    }
  });
});

// Observe all components
document.querySelectorAll('[class*="umd-element-"]').forEach((element) =&gt; {
  resizeObserver.observe(element);
});</code></pre>
                </div>
              </section>

              <!-- Testing Components -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Testing Components</h2>
                <div slot="text"><p>Best practices for testing components in your application.</p></div>
              </umd-element-section-intro>
              <section id="testing" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Jest Testing Setup</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// __tests__/components.test.js
import { Components } from '@universityofmaryland/web-components-library';

describe('UMD Components', () =&gt; {
  beforeEach(() =&gt; {
    document.body.innerHTML = '';
    Components.card.standard();
  });

  test('creates card component', () =&gt; {
    const card = document.createElement('umd-element-card');
    card.innerHTML = `
      &lt;h3 slot="headline"&gt;Test Headline&lt;/h3&gt;
      &lt;p slot="text"&gt;Test content&lt;/p&gt;
    `;

    document.body.appendChild(card);

    expect(card.shadowRoot).toBeTruthy();
    expect(card.querySelector('[slot="headline"]').textContent)
      .toBe('Test Headline');
  });

  test('handles missing required slots', () =&gt; {
    const card = document.createElement('umd-element-card');
    // Missing headline slot
    card.innerHTML = '&lt;p slot="text"&gt;Test content&lt;/p&gt;';

    // Component should still render
    document.body.appendChild(card);
    expect(card.shadowRoot).toBeTruthy();
  });
});</code></pre>
                </div>
              </section>

              <!-- Framework Integration -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Framework Integration</h2>
                <div slot="text"><p>Web components work natively in any framework. Here are common integration patterns.</p></div>
              </umd-element-section-intro>
              <section id="frameworks" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">React</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">import { useEffect, useRef } from 'react';

// Initialize components once at app root
import { LoadStructuralComponents } from '@universityofmaryland/web-components-library/structural';
LoadStructuralComponents();

function UmdHero({ title, image, children }) {
  return (
    &lt;umd-element-hero data-display="overlay"&gt;
      &lt;img slot="image" src={image} alt="" /&gt;
      &lt;h1 slot="headline"&gt;{title}&lt;/h1&gt;
      &lt;div slot="text"&gt;{children}&lt;/div&gt;
    &lt;/umd-element-hero&gt;
  );
}</code></pre>
                </div>

                <h3 class="umd-sans-larger">Vue</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// main.js â€” tell Vue to ignore umd-* tags
app.config.compilerOptions.isCustomElement = (tag) =&gt; tag.startsWith('umd-');

// In vite.config.js
export default defineConfig({
  plugins: [
    vue({
      template: {
        compilerOptions: {
          isCustomElement: (tag) =&gt; tag.startsWith('umd-'),
        },
      },
    }),
  ],
});</code></pre>
                </div>

                <h3 class="umd-sans-larger">Angular</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">// app.module.ts
import { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';

@NgModule({
  schemas: [CUSTOM_ELEMENTS_SCHEMA],
})
export class AppModule {}</code></pre>
                </div>
              </section>

              <!-- Custom Components -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Building Custom Components</h2>
                <div slot="text"><p>Extend the component library with your own custom components using the Model package.</p></div>
              </umd-element-section-intro>
              <section id="custom" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Custom Component Template</h3>
                <div class="code-example">
                  <pre><code class="language-typescript">import {
  Attributes,
  Model,
  Register,
  Slots,
  Lifecycle
} from '@universityofmaryland/web-model-library';

// Define your component
const tagName = 'umd-custom-feature';

const slots = {
  headline: {
    allowedElements: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
    required: true
  },
  text: {
    allowedElements: ['p', 'div'],
    required: false
  },
  media: {
    allowedElements: ['img', 'video', 'iframe'],
    required: false
  }
};

const createComponent = (element) =&gt; {
  const headline = Slots.headline.default({ element });
  const text = Slots.text.default({ element });
  const media = element.querySelector('[slot="media"]');

  // Create shadow DOM structure
  const template = `
    &lt;style&gt;
      :host {
        display: block;
        padding: 2rem;
      }
      .feature-content {
        max-width: 800px;
        margin: 0 auto;
      }
    &lt;/style&gt;
    &lt;div class="feature-content"&gt;
      ${headline ? `&lt;h2&gt;${headline.outerHTML}&lt;/h2&gt;` : ''}
      ${media ? `&lt;div class="media"&gt;${media.outerHTML}&lt;/div&gt;` : ''}
      ${text ? `&lt;div class="text"&gt;${text.outerHTML}&lt;/div&gt;` : ''}
    &lt;/div&gt;
  `;

  return {
    element: element,
    template: template
  };
};

// Register the component
export const CustomFeature = Register.webComponent({
  tagName,
  slots,
  createComponent
});</code></pre>
                </div>

                <div class="alert-pro-tip">
                  <strong>Full Custom Component Guide:</strong> For a comprehensive guide to building custom
                  components with the Model and Builder packages, see the
                  <a href="../infrastructure/model-and-builder.html">Model &amp; Builder documentation</a>.
                </div>
              </section>

              <!-- Performance -->
              <umd-element-section-intro class="umd-layout-space-vertical-interior-child umd-layout-space-horizontal-small">
                <h2 slot="headline">Performance Optimization</h2>
                <div slot="text"><p>Techniques for optimizing component performance in production.</p></div>
              </umd-element-section-intro>
              <section id="performance" class="umd-layout-space-vertical-interior">
                <h3 class="umd-sans-larger">Lazy Loading Components</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// Load components only when needed
const loadHeroComponents = () =&gt;
  import('@universityofmaryland/web-components-library').then(({ Components }) =&gt; {
    Components.hero.base();
    Components.hero.expand();
  });

// Intersection Observer for lazy loading
const heroObserver = new IntersectionObserver((entries) =&gt; {
  entries.forEach((entry) =&gt; {
    if (entry.isIntersecting) {
      loadHeroComponents().then(() =&gt; {
        console.log('Hero components loaded');
      });
      heroObserver.disconnect();
    }
  });
});

// Observe hero section
const heroSection = document.querySelector('.hero-section');
if (heroSection) {
  heroObserver.observe(heroSection);
}</code></pre>
                </div>

                <h3 class="umd-sans-larger">Bundle Optimization</h3>
                <div class="code-example">
                  <pre><code class="language-javascript">// webpack.config.js
module.exports = {
  optimization: {
    splitChunks: {
      cacheGroups: {
        umdComponents: {
          test: /[\\/]node_modules[\\/]@universityofmaryland[\\/]/,
          name: 'umd-components',
          priority: 10,
          chunks: 'all'
        }
      }
    }
  }
};

// Vite configuration
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'umd-components': ['@universityofmaryland/web-components-library'],
          'umd-styles': ['@universityofmaryland/web-styles-library']
        }
      }
    }
  }
};</code></pre>
                </div>

                <div class="alert-pro-tip">
                  <h5>Performance Tips</h5>
                  <ul>
                    <li>Load only the components you use</li>
                    <li>Use dynamic imports for below-the-fold components</li>
                    <li>Enable production mode for smaller bundles</li>
                    <li>Consider server-side rendering for SEO-critical content</li>
                    <li>
                      Use the <code>loading="lazy"</code> attribute on images within
                      components
                    </li>
                  </ul>
                </div>
              </section>

              <!-- Related Resources -->
              <div style="margin-top: 3rem;">
                <h3 class="umd-sans-larger">Related Resources</h3>
                <div class="umd-layout-grid-gap-three">
                  <umd-element-card data-visual-bordered="true">
                    <h3 slot="headline"><a href="index.html">Components API Reference</a></h3>
                    <p slot="text">Complete API documentation for all component exports.</p>
                    <umd-element-call-to-action slot="actions" data-display="secondary">
                      <a href="index.html">View API</a>
                    </umd-element-call-to-action>
                  </umd-element-card>
                  <umd-element-card data-visual-bordered="true">
                    <h3 slot="headline"><a href="usage.html">Component Usage Guide</a></h3>
                    <p slot="text">Slot-based markup patterns for every component.</p>
                    <umd-element-call-to-action slot="actions" data-display="secondary">
                      <a href="usage.html">View Guide</a>
                    </umd-element-call-to-action>
                  </umd-element-card>
                  <umd-element-card data-visual-bordered="true">
                    <h3 slot="headline"><a href="../infrastructure/model-and-builder.html">Model &amp; Builder</a></h3>
                    <p slot="text">Underlying model and builder patterns for custom components.</p>
                    <umd-element-call-to-action slot="actions" data-display="secondary">
                      <a href="../infrastructure/model-and-builder.html">View Docs</a>
                    </umd-element-call-to-action>
                  </umd-element-card>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <umd-element-footer data-display="mega" data-theme="dark">
      <div slot="link-column-one">
        <h3>Developer Tools</h3>
        <ul>
          <li><a href="https://umd-digital.github.io/design-system/">TypeDoc API Reference</a></li>
          <li><a href="https://www.npmjs.com/org/universityofmaryland">@universityofmaryland on npm</a></li>
          <li><a href="https://github.com/UMD-Digital/design-system">GitHub Repository</a></li>
        </ul>
      </div>
      <div slot="link-column-two">
        <h3>Learning</h3>
        <ul>
          <li><a href="../getting-started.html">Getting Started Guide</a></li>
          <li><a href="../architecture.html">Architecture Overview</a></li>
          <li><a href="http://playground.designsystem.umd.edu" target="_blank">Component Playground</a></li>
        </ul>
      </div>
      <div slot="link-column-three">
        <h3>UMD Links</h3>
        <ul>
          <li><a href="https://designsystem.umd.edu">designsystem.umd.edu</a></li>
          <li><a href="https://brand.umd.edu">brand.umd.edu</a></li>
          <li><a href="https://umd.edu">umd.edu</a></li>
        </ul>
      </div>
    </umd-element-footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script>
      // Smooth scrolling for TOC links
      document.querySelectorAll('.toc-link').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const target = document.querySelector(link.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

      // Update active TOC link on scroll
      const sections = document.querySelectorAll('section[id]');
      const tocLinks = document.querySelectorAll('.toc-link');

      window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (scrollY >= sectionTop - 100) {
            current = section.getAttribute('id');
          }
        });

        tocLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${current}`) {
            link.classList.add('active');
          }
        });
      });
    </script>
  </body>
</html>
