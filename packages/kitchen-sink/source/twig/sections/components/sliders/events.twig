{% extends '_layout.twig' %}

{% import '_includes/content-dropdown.twig' as Dropdown %}
{% import '_includes/macros/fields/headline.twig' as Headline %}
{% import '_includes/macros/fields/link.twig' as Link %}
{% import _self as macros %}

{% block page %}
  {{ macros.pagecontent() }}
{% endblock %}

{% macro pagecontent() %}
  <div style="padding-bottom: 50px;">
    <section>
      <div class="umd-lock">
        <h1 class="page-heading component-title">
          Events
        </h1>

        <h2 class="content-heading">
          Content Variations
        </h2>

        {{ Dropdown.ContentVariationsJs() }}
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <h3 class="content-heading">
          <span>Events</span>
          <span>Default</span>
        </h3>

        {{ macros.example() }}
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Theme Dark</span>
        </div>

        <umd-element-slider-events theme="dark">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <umd-element-call-to-action slot="actions"
            type="secondary"
            theme="dark">
            <a href="/"><span>CTA Link</span></a>
          </umd-element-call-to-action>

          <div slot="event-list">
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Limited Fields</span>
        </div>

        <umd-element-slider-events theme="light">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <div slot="event-list">
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Edge Case (Less than 3 dates)</span>
        </div>

        <umd-element-slider-events theme="light">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <div slot="event-list">
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>
  </div>
{% endmacro %}

{% macro example() %}
  <umd-element-slider-events>
    <div slot="headline">
      Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
    </div>

    <umd-element-call-to-action slot="actions" type="secondary" theme="light">
      <a href="/"><span>CTA Link</span></a>
    </umd-element-call-to-action>

    <div slot="event-list">
      {{
        macros.content({
          link: true
        })
      }}
      {{ macros.content() }}
      {{ macros.content() }}
      {{
        macros.content({
          link: true
        })
      }}
      {{ macros.content() }}
      {{ macros.content() }}
      {{ macros.content() }}
    </div>
  </umd-element-slider-events>
{% endmacro %}

{% macro content(params) %}
  {% set attrs = '' %}
  {% set date = params.date
    ?? random(['01', '05', '07', '12', '13', '21', '25', '28', '30', '31'])
  %}
  {% set text = params.text ?? 'default' %}
  {% set month = params.month
    ?? random(
      [
        'Jan',
        'Feb',
        'Mar',
        'Apr',
        'May',
        'Jun',
        'Jul',
        'Aug',
        'Sep',
        'Oct',
        'Nov',
        'Dec'
      ]
    )
  %}
  {% set normalString = params.string
    ?? random(
      [
        'Study Abroad Fair',
        'TerrapinSTRONG In Person',
        'Topography Competition',
        'Disrupting Grind Culture',
        'Transparency in Teaching',
        'Revolutionizing AI'
      ]
    )
  %}

  {% if params.theme == 'dark' %}
    {% set attrs = attrs ~ 'theme="' ~ params.theme ~ '"' %}
  {% endif %}

  {% set hasDate = params.date ?? true %}
  {% set isLink = params.link ?? false %}

  <umd-element-events-date {{ attrs }}>
    {% if hasDate %}
      <p slot="month">
        {{ month }}
      </p>
      <p slot="day">
        {{ date }}
      </p>
    {% endif %}

    <p slot="headline">
      {% if isLink == false %}
        {{ normalString }}
      {% endif %}
      {% if isLink %}
        <a href="{{ url }}">{{ normalString }}</a>
      {% endif %}
    </p>
  </umd-element-events-date>
{% endmacro %}
