{% extends '_layout.twig' %}

{% import '_includes/content-dropdown.twig' as Dropdown %}
{% import '_includes/macros/fields/headline.twig' as Headline %}
{% import '_includes/macros/fields/link.twig' as Link %}
{% import _self as macros %}

{% block page %}
  {{ macros.pagecontent() }}
{% endblock %}

{% macro pagecontent() %}
  <div style="padding-bottom: 50px;">
    <section>
      <div class="umd-lock">
        <h1 class="page-heading component-title">
          Events
        </h1>

        <h2 class="content-heading">
          Content Variations
        </h2>

        {{ Dropdown.ContentVariations() }}
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <h3 class="content-heading">
          <span>Events</span>
          <span>Default</span>
        </h3>

        {{ macros.example() }}
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Theme Dark</span>
        </div>

        <umd-element-slider-events theme="dark">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <umd-element-call-to-action slot="actions"
            type="secondary"
            theme="dark">
            <a href="/"><span>CTA Link</span></a>
          </umd-element-call-to-action>

          <div slot="event-list">
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark'
              })
            }}
            {{
              macros.content({
                theme: 'dark',
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Limited Fields</span>
        </div>

        <umd-element-slider-events theme="light">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <div slot="event-list">
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Multi Day</span>
        </div>

        <umd-element-slider-events theme="light">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <div slot="event-list">
            <umd-element-events-date>
              <div slot="start-date-iso">
                2024-04-12T12:00:00.000Z
              </div>

              <div slot="end-date-iso">
                2024-04-13T17:30:00.000Z
              </div>

              <p slot="headline">
                <a href="">Study Abroad Fair</a>
              </p>
            </umd-element-events-date>

            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>

    <section>
      <div class="umd-lock">
        <div class="content-heading">
          <span>Events</span>
          <span>Edge Case (Less than 3 dates)</span>
        </div>

        <umd-element-slider-events theme="light">
          <div slot="headline">
            Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
          </div>

          <div slot="event-list">
            {{
              macros.content({
                link: true
              })
            }}
            {{
              macros.content({
                link: true
              })
            }}
          </div>
        </umd-element-slider-events>
      </div>
    </section>
  </div>
{% endmacro %}

{% macro example() %}
  <umd-element-slider-events>
    <div slot="headline">
      Lorem Ipsum Dolor Sit Amet Consectetur Adipiscing Elit
    </div>

    <umd-element-call-to-action slot="actions" type="secondary" theme="light">
      <a href="/"><span>CTA Link</span></a>
    </umd-element-call-to-action>

    <div slot="event-list">
      {{
        macros.content({
          link: true
        })
      }}
      {{ macros.content() }}
      {{ macros.content() }}
      {{
        macros.content({
          link: true
        })
      }}
      {{ macros.content() }}
      {{ macros.content() }}
      {{ macros.content() }}
    </div>
  </umd-element-slider-events>
{% endmacro %}

{% macro content(params) %}
  {% set attrs = '' %}
  {% set date = params.date
    ?? random(
      [
        '2024-04-12T12:00:00.000Z',
        '2024-05-19T12:00:00.000Z',
        '2024-06-10T12:00:00.000Z',
        '2024-07-17T12:00:00.000Z',
        '2024-08-18T12:00:00.000Z',
        '2024-09-28T12:00:00.000Z',
        '2024-10-04T12:00:00.000Z',
        '2024-11-09T12:00:00.000Z',
        '2024-12-11T12:00:00.000Z',
        '2025-01-04T12:00:00.000Z'
      ]
    )
  %}
  {% set text = params.text ?? 'default' %}

  {% set normalString = params.string
    ?? random(
      [
        'Study Abroad Fair',
        'TerrapinSTRONG In Person',
        'Topography Competition',
        'Disrupting Grind Culture',
        'Transparency in Teaching',
        'Revolutionizing AI'
      ]
    )
  %}

  {% if params.theme == 'dark' %}
    {% set attrs = attrs ~ 'theme="' ~ params.theme ~ '"' %}
  {% endif %}

  {% set hasDate = params.date ?? true %}
  {% set isLink = params.link ?? false %}

  <umd-element-events-date {{ attrs }}>
    {% if hasDate %}
      <p slot="month">
        {{ month }}
      </p>
      <div slot="start-date-iso">
        {{ date }}
      </div>
    {% endif %}

    <p slot="headline">
      {% if isLink == false %}
        {{ normalString }}
      {% endif %}
      {% if isLink %}
        <a href="{{ url }}">{{ normalString }}</a>
      {% endif %}
    </p>
  </umd-element-events-date>
{% endmacro %}
